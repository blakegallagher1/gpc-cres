# ============================================
# Supabase Configuration
# ============================================
# Get these from your Supabase project settings
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
# Optional: Supabase custom domain URL (if enabled in dashboard)
SUPABASE_CUSTOM_DOMAIN_URL=
NEXT_PUBLIC_SUPABASE_CUSTOM_DOMAIN_URL=
# Optional: Supabase pooled/direct DB wiring for runtime + migrations + read replicas
# Serverless (Vercel/Edge): DATABASE_URL MUST use Supavisor on port 6543 (Transaction Mode).
# Session Mode (port 5432) will exhaust connections under parallel tool calls.
DATABASE_URL=
DIRECT_DATABASE_URL=
# Local API Server (FastAPI via Cloudflare Tunnel)
# Tile proxy and property database queries route through this API
# Generate API key with: openssl rand -hex 32
LOCAL_API_URL=https://api.gallagherpropco.com
LOCAL_API_KEY=your-secret-api-key-here

# Cron Job Authentication
# Used by Vercel Cron for change detection and parish pack refresh
# Generate with: openssl rand -hex 32
CRON_SECRET=your-cron-secret-here

READ_REPLICA_DATABASE_URL=
ENABLE_READ_REPLICA=false
PRISMA_CONNECTION_LIMIT=15
PRISMA_POOL_TIMEOUT_SECONDS=20
# Required for screening, copilot, and deal-room integrations.
# In local development, you can use http://localhost:8000.
# In production/staging, you must set this to your deployed backend API origin.
NEXT_PUBLIC_BACKEND_URL=http://localhost:8000

# ============================================
# Auth Allowlist (Optional)
# ============================================
# Comma-separated list of approved login emails.
ALLOWED_LOGIN_EMAILS=blake@gallagherpropco.com
# Optional client-side override (baked at build time if set)
NEXT_PUBLIC_ALLOWED_LOGIN_EMAILS=blake@gallagherpropco.com

# ============================================
# OpenAI Configuration
# ============================================
# Get from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-key

# Optional chat session memory tuning
AGENT_SESSION_COMPACTION_TOKEN_THRESHOLD=6000
AGENT_SESSION_COMPACTION_KEEP_RECENT_MESSAGES=24
AGENT_SESSION_DEDUPE_LOOKBACK=200

# ============================================
# Optional: Perplexity API (for research agent)
# ============================================
# Get from https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=your-perplexity-key

# ============================================
# Optional: Sentry Error Tracking
# ============================================
# Get from https://sentry.io/settings/projects/
SENTRY_AUTH_TOKEN=
SENTRY_ORG=gpc-ul
SENTRY_PROJECT=entitlement-os-web
SENTRY_DSN=your-sentry-dsn
NEXT_PUBLIC_SENTRY_DSN=your-public-sentry-dsn
SENTRY_AGENTS_DSN=your-agents-sentry-dsn
SENTRY_TRACES_BASE_SAMPLE_RATE=0.01
SENTRY_TRACES_CHAT_SAMPLE_RATE=0.2
SENTRY_AGENTS_TRACES_SAMPLE_RATE=0.2

# ============================================
# Market Trajectory Agent (Socrata + Google Places)
# ============================================
# Socrata municipal open-data portal (building permits)
SOCRATA_BASE_URL=https://data.brla.gov/resource
SOCRATA_APP_TOKEN=
# Google Places API (gentrification indicators). Required for Places tool.
GOOGLE_MAPS_API_KEY=

# ============================================
# Optional: Backblaze B2 (for file storage)
# ============================================
B2_APPLICATION_KEY_ID=your-key-id
B2_APPLICATION_KEY=your-key
B2_BUCKET_NAME=gpc-dashboard-files
